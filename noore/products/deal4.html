<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Butterfly deal4 – Nooré Jewels</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Italiana&family=Montserrat:wght@400;400;500;600&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   
</head>
<body>
    <!-- Header -->
     <header class="site-header">
        <div class="container">
            <div class="logo">
                <a href="/">Nooré Jewels</a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="../collection.html"  class="active">Collection</a></li>
                    <li><a href="../about.html">About</a></li>
                    <li><a href="../contact.html">Contact</a></li>
                    <li><a href="../help.html">Help</a></li>
                </ul>
            </nav>
            <div class="mobile-menu">
                                 <button class="mobile-menu-close" aria-label="Close menu">&times;</button>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="../collection.html" class="active">Collection</a></li>
                    <li><a href="../about.html">About</a></li>
                    <li><a href="../contact.html">Contact</a></li>
                    <li><a href="../cart.html">Cart</a></li>
                    <li><a href="../help.html">Help</a></li>
                </ul>
            </div>
            <div class="header-actions">
                <a href="../cart.html" class="cart-icon"><i class="fas fa-shopping-bag"></i> <span class="cart-count">0</span></a>
                <a href="https://wa.me/924248971628?text=Hi%20Noor%C4%A9%20Jewels,%20I'd%20like%20to%20place%20an%20order" class="whatsapp-btn"><i class="fab fa-whatsapp"></i> <span>Order Now</span></a>
                <div class="mobile-menu-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </header>

    <!-- Product Detail -->
    <main>
        <section class="product-detail">
            <div class="container">
                <nav class="breadcrumb">
                    <ul>
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="../collection.html">/    Collection</a></li>
                        <li class="current">/     Deal 4</li>
                    </ul>
                </nav>
                <div class="product-layout">
                    <!-- Product Gallery -->
                    <div class="product-gallery">
                        <div class="main-image">
                            <img id="main-product-image" src="../images/products/deal4/deal4.png" alt="Deal 4">
                        </div>
                        <div class="thumbnails">
                            <div class="thumbnail active" data-image="../images/products/deal4/deal4.png">
                                <img src="../images/products/deal4/deal4.png" alt="Deal 4">
                            </div>
                            <div class="thumbnail" data-image="../images/products/deal4/deal41.png">
                                <img src="../images/products/deal4/deal41.png" alt="Deal 4 Side">
                            </div>
                           
                        </div>
                    </div>
                    <!-- Product Info -->
                    <div class="product-info">
                        <div class="product-category">All items</div>
                        <h1 class="product-title">Get our Deal 4: Crystal Studs + Tear Drop Earrings.</h1>
                      
                        <div class="product-price" id="product-price">
                            <span class="original">PKR 1100</span> PKR 799
                        </div>
                        <ul class="product-meta">
                            <li><strong>SKU:</strong> PRODUCT-007</li>
                            <li><strong>Category:</strong> All items</li>
                            <li><strong>Tags:</strong> new bestseller deals free</li>
                        </ul>
                        <div style="display: flex; gap: 12px; margin-top: 18px; max-width: 450px; flex-wrap: wrap;">
                            <a href="https://wa.me/924248971628?text=Hi%20Noor%C4%A9%20Jewels,%20I'm%20interested%20in%20Deal4" class="btn primary-btn" style="flex:1 1 180px; min-width:140px;">
                                <i class="fab fa-whatsapp"></i> Order via WhatsApp
                            </a>
                            <button class="btn add-to-cart" style="flex:1 1 180px; min-width:140px;">
                                <i class="fas fa-shopping-bag"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Product Tabs -->
                <div class="product-tabs">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="description">Description</button>
                        <button class="tab-btn" data-tab="details">Details</button>
                        <button class="tab-btn" data-tab="shipping">Shipping</button>
                    </div>
                    <div class="tab-content active" id="description">
                        <h2>Product Description</h2>
                        <p>
                          Get our Deal 4: Crystal Studs + Tear Drop Earrings. 
                        </p>
                    </div>
                    <div class="tab-content" id="details">
                        <h2>Product Details</h2>
                        <ul>
                            <li>Stylish Look</li>
                            <li>High Quality</li>
                        </ul>
                    </div>
                    <div class="tab-content" id="shipping" data-delivery-charge="150">
                        <h2>Shipping</h2>
                        <p>
                            Free Delivery All Across Pakistan!
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Featured Products -->
        <section class="featured-products">
            <div class="container">
                <h2 class="section-title">Featured Collection</h2>
                <div class="products-grid" id="featured-products-grid">
                    <!-- Featured products will be loaded here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="../collection.html">Collection</a></li>
                        <li><a href="../about.html">About Us</a></li>
                        <li><a href="../contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Contact Us</h4>
                    <ul class="contact-info">
                        <li><i class="fas fa-phone"></i> <a href="tel:+924248971628">+92 424 8971628</a></li>
                        <li><i class="fas fa-envelope"></i> <a href="mailto:noorejewelpk@gmail.com">noorejewelpk@gmail.com</a></li>
                        <li><i class="fab fa-whatsapp"></i> <a href="https://wa.me/924248971628">WhatsApp: +92 424 8971628</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Follow Us</h4>
                    <div class="social-icons">
                        <a href="https://instagram.com/noorejewelpk" target="_blank"><i class="fab fa-instagram"></i></a>
                        <a href="https://facebook.com/noorejewelpk" target="_blank"><i class="fab fa-facebook"></i></a>
                        <a href="https://tiktok.com/@noorejewelpk" target="_blank"><i class="fab fa-tiktok"></i></a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>© 2025 Nooré Jewels – Karachi, Pakistan. All Rights Reserved</p>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/924248971628" class="floating-whatsapp">
        <i class="fab fa-whatsapp"></i>
    </a>

    <!-- Quick View Modal -->
<div class="modal" id="quick-view-modal">
    <div class="modal-content">
        <div class="close-modal" id="close-modal">
            <i class="fas fa-times"></i>
        </div>
        <div class="quick-view-grid">
            <div class="quick-view-image">
                <img src="../images/products/deal4/deal4.png" alt="Product Name" id="modal-image">
            </div>
            <div class="quick-view-info">
                <div class="quick-view-category" id="modal-category">Category</div>
                <h2 class="quick-view-title" id="modal-title">Product Name</h2>
               
                <div class="quick-view-price" id="modal-price">PKR 799</div>
                <p class="quick-view-description" id="modal-description">
                    Get our Deal 4: Crystal Studs + Tear Drop Earrings. 
                </p>
                <div class="quick-view-extra" id="modal-details-section" style="display:none;">
                    <h4>Details</h4>
                    <ul id="modal-details"></ul>
                </div>
                <div class="quick-view-extra" id="modal-shipping-section" style="display:none;">
                    <h4>Shipping & Returns</h4>
                    <p id="modal-shipping"></p>
                </div>
                <div class="quick-view-buttons">
                    <a href="#" class="btn primary-btn" id="modal-view-details">View Full Details</a>
                    <a href="#" class="btn outline-btn" id="modal-whatsapp">Order via WhatsApp</a>
                </div>
            </div>
        </div>
    </div>
</div>

    <script src="../js/main.js" defer></script>
    <script src="../js/cart.js" defer></script>
    <script>
      // Product Gallery Thumbnail Switcher
      document.addEventListener('DOMContentLoaded', function() {
        const thumbnails = document.querySelectorAll('.thumbnail');
        const mainImage = document.getElementById('main-product-image');
        if (thumbnails.length && mainImage) {
          thumbnails.forEach(thumb => {
            thumb.addEventListener('click', function() {
              thumbnails.forEach(t => t.classList.remove('active'));
              this.classList.add('active');
              mainImage.style.opacity = '0';
              setTimeout(() => {
                mainImage.src = this.dataset.image;
                mainImage.alt = this.querySelector('img').alt;
                mainImage.style.opacity = '1';
              }, 100);
            });
          });
        }
        // Tabs
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');
        tabBtns.forEach(btn => {
          btn.addEventListener('click', function() {
            tabBtns.forEach(b => b.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            this.classList.add('active');
            document.getElementById(this.dataset.tab).classList.add('active');
          });
        });
      });

      // Featured Products Fetch & Render
      document.addEventListener('DOMContentLoaded', function() {
          fetch('/api/products')
              .then(res => res.json())
              .then(function(products) {
                  const grid = document.getElementById('featured-products-grid');
                  if (!grid) return;
                  grid.innerHTML = '';
                  if (Array.isArray(products)) {
                      // Only show products with 'featured' in tags
                      const featured = products.filter(p => (p.tags || '').split(' ').includes('featured'));
                      if (featured.length === 0) {
                          grid.innerHTML = '<p>No featured products found.</p>';
                          return;
                      }
                      featured.forEach(product => {
    const card = document.createElement('div');
    card.className = 'product-card fade-element';
    card.dataset.category = product.category;
    card.dataset.price = product.price;
    card.dataset.tags = product.tags || '';
    // FIX: Use only filename if already in /products/
    let detailsLink = product.detailsLink;
    if (window.location.pathname.includes('/products/')) {
        detailsLink = product.detailsLink.replace(/^products\//, '');
    }
    card.dataset.detailsLink = detailsLink || '';
    card.dataset.whatsappLink = product.whatsappLink || '';
    card.dataset.description = product.description || '';
    card.dataset.details = product.details || '';
    card.dataset.shipping = product.shipping || '';
    card.innerHTML = `
        <div class="product-image">
            <img src="${product.image}" alt="${product.title}">
            <div class="product-overlay">
                <div class="product-actions">
                    <button class="action-btn quick-view-trigger" title="Quick View"><i class="fas fa-eye"></i></button>
                    <div class="action-btn add-to-cart" data-name="${product.title}" data-price="${product.price}" data-image="${product.image}" title="Add to Cart"><i class="fas fa-shopping-bag"></i></div>
                </div>
            </div>
        </div>
        <div class="product-info">
            <div class="product-category">${product.category ? product.category.charAt(0).toUpperCase() + product.category.slice(1) : ''}</div>
            <h4>${product.title}</h4>
            <div class="price">${product.original ? `<span class="original">PKR ${product.original}</span> ` : ''}PKR ${product.price}</div>
            <a href="${detailsLink}" class="btn outline-btn">View Details</a>
            <a href="${product.whatsappLink}" class="whatsapp-order" target="_blank"><i class="fab fa-whatsapp"></i> Order via WhatsApp</a>
        </div>
    `;
    grid.appendChild(card);
    setTimeout(() => card.classList.add('fade-in'), 10);

    // WhatsApp order button
    card.querySelector('.whatsapp-order').addEventListener('click', function(e) {
        e.preventDefault();
        window.open(this.href, '_blank');
    });

    // Add to cart button
    card.querySelector('.add-to-cart').addEventListener('click', function(e) {
        e.preventDefault();
        if (typeof handleAddToCart === 'function') {
            this.closest = () => card;
            handleAddToCart.call(this, e);
        } else {
            alert('Added to cart! (Implement cart logic)');
        }
    });

    // Quick View button (modal support)
    card.querySelector('.quick-view-trigger').addEventListener('click', function(e) {
    e.preventDefault();
    const modal = document.getElementById('quick-view-modal');
    if (!modal) return;
    document.getElementById('modal-image').src = card.querySelector('img').src;
    document.getElementById('modal-image').alt = card.querySelector('h4').textContent;
    document.getElementById('modal-category').textContent = card.dataset.category || '';
    document.getElementById('modal-title').textContent = card.querySelector('h4').textContent;
    document.getElementById('modal-price').innerHTML = card.querySelector('.price').innerHTML;
    document.getElementById('modal-view-details').href = card.dataset.detailsLink || '#';
    document.getElementById('modal-whatsapp').href = card.dataset.whatsappLink || '#';

    // Description
    document.getElementById('modal-description').textContent = card.dataset.description || '';

    // Details
    const detailsSection = document.getElementById('modal-details-section');
    const detailsList = document.getElementById('modal-details');
    if (card.dataset.details) {
        detailsSection.style.display = '';
        let details = [];
        try {
            details = JSON.parse(card.dataset.details);
        } catch {
            details = card.dataset.details.split(/[\n;]+/).map(s => s.trim()).filter(Boolean);
        }
        detailsList.innerHTML = details.map(d => `<li>${d}</li>`).join('');
    } else {
        detailsSection.style.display = 'none';
        detailsList.innerHTML = '';
    }

    // Shipping
    const shippingSection = document.getElementById('modal-shipping-section');
    const shippingText = document.getElementById('modal-shipping');
    if (card.dataset.shipping) {
        shippingSection.style.display = '';
        shippingText.textContent = card.dataset.shipping;
    } else {
        shippingSection.style.display = 'none';
        shippingText.textContent = '';
    }

    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
});



                      });
                  }
              });
      });
    </script>
    <script>
    // Remove localStorage logic and fetch delivery charge from API
    document.addEventListener('DOMContentLoaded', function() {
        const productTitle = document.querySelector('.product-title')?.textContent?.trim();
        if (!productTitle) return;

        fetch('/api/products')
            .then(res => res.json())
            .then(products => {
                const product = products.find(p => p.title === productTitle);
                if (product && product.deliveryCharge) {
                    const deliveryElem = document.getElementById('delivery-charge-value');
                    if (deliveryElem) deliveryElem.textContent = product.deliveryCharge;
                }
            });
    });
    </script>
    <script>
  // Add modal close logic for Quick View Modal
  document.addEventListener('DOMContentLoaded', function() {
    const quickViewModal = document.getElementById('quick-view-modal');
    const closeModalBtn = document.getElementById('close-modal');
    if (quickViewModal && closeModalBtn) {
      closeModalBtn.onclick = function() {
        quickViewModal.classList.remove('active');
        document.body.style.overflow = 'auto';
      };
      quickViewModal.onclick = function(e) {
        if (e.target === quickViewModal) {
          quickViewModal.classList.remove('active');
          document.body.style.overflow = 'auto';
        }
      };
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && quickViewModal.classList.contains('active')) {
          quickViewModal.classList.remove('active');
          document.body.style.overflow = 'auto';
        }
      });
    }
  });
</script>
</body>
</html>